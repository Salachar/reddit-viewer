(this["webpackJsonpredux-cra"]=this["webpackJsonpredux-cra"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports={post:"Post_post__1ZCkS",bar:"Post_bar__2ytou",score:"Post_score__3J9Go",thumbnail:"Post_thumbnail__2Mv8T",body:"Post_body__1tjlH",title:"Post_title__1sUIr",icon:"Post_icon__2-AFI",submission:"Post_submission__2PLyZ",comments:"Post_comments__1eQ7f",load_comments:"Post_load_comments__3QYMw",comments_wrapper:"Post_comments_wrapper__14RNb",content_wrapper:"Post_content_wrapper__3IKz1",hide:"Post_hide__q3vp2",subreddit_link:"Post_subreddit_link__3RnEj"}},,function(e,t,a){e.exports={wrapper:"Comments_wrapper__h6tw3",comments:"Comments_comments__3NgER",comment_even:"Comments_comment_even__2U9nK",comment_odd:"Comments_comment_odd__3wItb",comment:"Comments_comment__3MfqI",author:"Comments_author__3MjnA",score:"Comments_score__1gShr",body:"Comments_body__1B94B",award:"Comments_award__yjfLH",gold:"Comments_gold__6PfTT",silver:"Comments_silver__3ggsF"}},function(e,t,a){e.exports={main_links:"Header_main_links__3lpuR",listing:"Header_listing__3drQY",search_label:"Header_search_label__1_-nu",search:"Header_search__1zI1g",selected:"Header_selected__3dQdV"}},function(e,t,a){e.exports={sidemenu:"SideMenu_sidemenu__2GrsV",title:"SideMenu_title__rRgxI",section:"SideMenu_section__3Wl6k",section_title:"SideMenu_section_title__3EIq3"}},,,function(e,t,a){e.exports={subreddit:"Subreddit_subreddit__2lgPg",checkbox:"Subreddit_checkbox__2UDbU",title:"Subreddit_title__3_NX6",subscribers:"Subreddit_subscribers__2uqEG"}},function(e,t,a){e.exports={wrapper:"App_wrapper__2CBHV",header:"App_header__SZGgc",articleList:"App_articleList__1F2Yd",sideMenu:"App_sideMenu__3EQTh"}},,function(e,t,a){e.exports={content:"Link_content__10cBw",link:"Link_link__2vhKr",link_address:"Link_link_address__15p7b"}},,,,,function(e,t,a){e.exports={media:"Image_media__2V2Pq",media_max:"Image_media_max__99lxE"}},,,,function(e,t,a){e.exports={search:"Search_search__19ult"}},function(e,t,a){e.exports={content:"Text_content__1lINs"}},function(e,t,a){e.exports={media:"Video_media__2ghAf"}},function(e,t,a){e.exports={wrapper:"Posts_wrapper__11-4S"}},,function(e,t,a){e.exports=a(42)},,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(15),c=a.n(s),i=a(5),o=a(11),l=a(24),u={byID:{}},d={},m={},p={},_=Object(o.c)({comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"post":var a=e.byID,n=void 0===a?{}:a;return n[t.payload.data.id]=t.payload.comments,{byID:n};default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts":return t.payload;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"search_subreddits":return{subreddits:t.payload};default:return e}},subreddits:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"subscribe_subreddit":var a={};return(t.payload||[]).forEach((function(e){a[e.key]=e})),{subscribed:t.payload,subscribed_map:a};default:return e}}});a(41);var b=a(1),h=a(2),f=a(4),v=a(3);function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function k(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function g(e,t){return new Promise((function(a,n){try{fetch(e).then((function(e){return e.json()})).then((function(e){try{a(t(e))}catch(n){console.log(n)}}))}catch(r){console.error(r)}}))}var x=a(20);function j(e){try{!e.author&&e.kind&&(e=e.data.children[0].data);var t=function(e){return Object(x.a)(Object(x.a)({},e),{},{title:(e.title||"").replace(/&amp;/g,"&"),type:"none",content:{},media:{},score_display:(t=e.score,t>1e5?Math.floor(t/1e3)+"K":t>1e4?(t/1e3).toFixed(1)+"K":t),submitted_at:function(e){var t=(new Date).getTime()-new Date(1e3*e).getTime();return(t=t/1e3/60)>60?Math.floor(t/60)+" hours":Math.floor(t)+" minutes"}(e.created_utc),awards:(e.all_awardings||[]).map((function(e){return{name:e.name.toLowerCase(),count:e.count,key:"".concat(e.id,"-").concat(y())}}))});var t}(e);return!function(e){return e.is_self}(e)?!function(e){return!(!e.post_hint||-1===e.post_hint.indexOf("video"))||!!(e.url&&e.is_video&&e.is_reddit_media_domain)}(e)?!function(e){return!(!e.post_hint||-1===e.post_hint.indexOf("image"))||!(!e.url||!e.url.match(/.jpg|.jpeg|.png|.bmp|.gif/))}(e)?e.url&&(t.type="link"):(t.type="image",t.media.image=e.url):t.type="video":(t.type="text",t.content.body=e.selftext,t.content.body_html=e.selftext_html),t}catch(a){return console.error(a),null}}var E=function(e){return function(t){console.log(e),"string"===typeof e&&(e={url:"/r/".concat(e),title:e,name:e}),g("https://www.reddit.com/".concat(e.url,".json?limit=25"),(function(t){return{title:e.title||e.name,list:t.data.children.map((function(e){return j(e.data)}))}})).then((function(e){t({type:"posts",payload:e})}))}},O=a(7),w=a.n(O),N=a(9),C=a.n(N),S=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).searchCollection=function(t){var a=e.props,n=a.subscribed;(0,a.fetchPosts)({title:"Subscribed",url:"/r/"+n.map((function(e){return e.name})).join("+")})},e.onClick=function(t){e.props.fetchPosts({title:t.currentTarget.dataset.listing,url:t.currentTarget.dataset.listing})},e.onSearch=function(t){if("enter"===t.key.toLowerCase()){var a=t.currentTarget.value;e.props.fetchPosts({title:a,url:"/r/"+a})}},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.posts,n=void 0===a?{}:a;return r.a.createElement("header",{className:w()(C.a.listings,t)},r.a.createElement("div",{className:C.a.main_links},r.a.createElement("span",{onClick:this.onClick,"data-listing":"best",className:C.a.listing},"Best"),r.a.createElement("span",{onClick:this.onClick,"data-listing":"top",className:C.a.listing},"Top"),r.a.createElement("span",{onClick:this.onClick,"data-listing":"new",className:C.a.listing},"New"),r.a.createElement("span",{onClick:this.onClick,"data-listing":"hot",className:C.a.listing},"Hot"),r.a.createElement("span",{onClick:this.searchCollection,"data-listing":"subscribed",className:C.a.listing},"Subscribed"),r.a.createElement("span",{className:C.a.search_label},"/r/"),r.a.createElement("input",{className:C.a.search,spellCheck:"false",onKeyDown:this.onSearch,placeholder:"subreddit"})),r.a.createElement("div",{className:C.a.selected},n.title||""))}}]),a}(n.Component),P={fetchPosts:E},M=Object(i.b)((function(e){return{subscribed:e.subreddits.subscribed||[],posts:e.posts||{}}}),P)(S),I=a(10),T=a.n(I),L=a(25),D=a.n(L),H=a(13),A=a.n(H),K=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){e.props.fetchPosts(e.props.subreddit)},e.onSubscribe=function(t){var a=t.currentTarget.checked;e.props.subscribeSubreddit(e.props.subreddit,a?"add":"remove")},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:A.a.subreddit},r.a.createElement("input",{type:"checkbox",checked:this.props.checked,onChange:this.onSubscribe,className:A.a.checkbox}),r.a.createElement("span",{onClick:this.onClick,className:A.a.title},this.props.subreddit.name),r.a.createElement("span",{className:A.a.subscribers},this.props.subreddit.subscribers.display))}}]),a}(n.Component),F={fetchPosts:E,subscribeSubreddit:function(e,t){return function(a,n){var r,s=(r=(n().subreddits||{}).subscribed||[],JSON.parse(JSON.stringify(r)));"add"===t?s.push(e):s=s.filter((function(t){return t.key!==e.key})),a({type:"subscribe_subreddit",payload:s})}}},q=Object(i.b)(null,F)(K),B=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).search=function(t){if("enter"===t.key.toLowerCase()){var a=t.currentTarget.value;e.props.searchForSubreddits(a)}},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:T.a.section},r.a.createElement("div",{className:T.a.section_title},"Search:"),r.a.createElement("input",{className:D.a.search,spellCheck:"false",onKeyDown:this.search,placeholder:"subreddit name"}),(this.props.subreddits||[]).map((function(t){return r.a.createElement(q,{key:"search_".concat(t.key),checked:!!e.props.subscribed_map[t.key],subreddit:t})})))}}]),a}(n.Component),R={searchForSubreddits:function(e){return function(e){return function(t){g("https://www.reddit.com/subreddits/search.json?q=".concat(e),(function(t){var a=(t.data.children||[]).map((function(e){var t={key:e.data.display_name.toLowerCase()+"_"+(new Date).getTime(),description:e.data.public_description,name:e.data.display_name,name_lower:e.data.display_name.toLowerCase(),url:e.data.url,banner:e.data.banner_img,icon:e.data.icon_img,subscribers:{display:e.data.subscribers,full:e.data.subscribers}},a=t.subscribers.full;return a>1e6?t.subscribers.display=(a/1e5).toFixed(1)+"M":a>1e5?t.subscribers.display=Math.floor(a/1e3)+"K":a>1e4&&(t.subscribers.display=(a/1e3).toFixed(1)+"K"),t}));return a.sort((function(t,a){var n=-1!==t.name_lower.indexOf(e),r=-1!==a.name_lower.indexOf(e);return n&&r?a.subscribers.full-t.subscribers.full:n?-1:r?1:a.subscribers.full-t.subscribers.full})),a})).then((function(e){t({type:"search_subreddits",payload:e})}))}}(e)}};B.defaultProps={subreddits:[],subscribed_map:{}};var G=Object(i.b)((function(e){return{subreddits:e.search.subreddits,subscribed_map:e.subreddits.subscribed_map}}),R)(B),J=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:T.a.section},r.a.createElement("div",{className:T.a.section_title},"Subscribed:"),(this.props.subscribed||[]).map((function(e){return r.a.createElement(q,{key:"subbed_".concat(e.key),checked:!0,subreddit:e})})))}}]),a}(n.Component),Q=Object(i.b)((function(e){return{subscribed:e.subreddits.subscribed}}),null)(J),V=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.className;return r.a.createElement("div",{className:w()(T.a.sidemenu,e)},r.a.createElement("div",{className:T.a.title},"Subreddits"),r.a.createElement(Q,{subscribed:this.props.subscribed}),r.a.createElement(G,null))}}]),a}(n.Component),U=Object(i.b)((function(e){return{subscribed:e.subreddits.subscribed}}),null)(V),W=a(12),Y=a(29),Z=a(21),z=a.n(Z),X=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={is_media_max:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props.post,a=this.state.is_media_max;return r.a.createElement("img",{alt:"Parse for text",className:w()(z.a.media,Object(W.a)({},z.a.media_max,a)),src:t.media.image,onClick:function(){e.setState({is_media_max:!a})}})}}]),a}(n.Component),$=a(26),ee=a.n($),te=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.post;return r.a.createElement("div",{className:ee.a.content,dangerouslySetInnerHTML:{__html:k(e.content.body_html)}})}}]),a}(n.Component),ae=a(16),ne=a.n(ae),re=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.post;return r.a.createElement("div",{className:ne.a.content},r.a.createElement("a",{className:ne.a.link,href:e.url,target:"_blank",rel:"noopener noreferrer"},"Go To Article"),r.a.createElement("a",{className:ne.a.link_address,href:e.url,target:"_blank",rel:"noopener noreferrer"},e.url))}}]),a}(n.Component),se=a(27),ce=a.n(se),ie=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).ref_media=r.a.createRef(),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){if(this.ref_media&&this.ref_media.current){var e=this.ref_media.current.getElementsByTagName("iframe")[0],t=e.width/e.height;e.width=this.ref_media.current.clientWidth,e.height=this.ref_media.current.clientWidth/t}}},{key:"render",value:function(){var e=this.props.post,t=void 0===e?{}:e,a=t.secure_media,n=void 0===a?{}:a,s=t.secure_media_embed,c=void 0===s?{}:s;return n.reddit_video?r.a.createElement("video",{controls:!0,src:n.reddit_video.fallback_url}):c.content?r.a.createElement("div",{className:ce.a.media,dangerouslySetInnerHTML:{__html:k(t.secure_media_embed.content)},ref:this.ref_media}):void 0}}]),a}(n.Component),oe=a(8),le=a.n(oe),ue=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"renderComments",value:function(e){var t=this;if(e&&e.length)return e.map((function(e){return r.a.createElement("div",{key:e.key,className:"".concat(le.a.comment," ").concat(e.even?le.a.comment_even:le.a.comment_odd)},r.a.createElement("div",{className:le.a.author},r.a.createElement("span",null,e.author),r.a.createElement("span",{className:le.a.score},e.score," points"),(e.awards||[]).map((function(e){return e.name.match(/gold|silver/)?r.a.createElement("div",{key:e.key,className:"".concat(le.a.award," ").concat(le.a[e.name])},e.count):r.a.createElement("div",{key:e.key,className:le.a.award},e.name)}))),r.a.createElement("div",{className:le.a.body,dangerouslySetInnerHTML:{__html:e.body}}),(e.replies||[]).length>0&&r.a.createElement("div",{className:le.a.comments},t.renderComments(e.replies)))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:le.a.wrapper},this.renderComments(this.props.comments))}}]),a}(n.Component),de=Object(i.b)(null,null)(ue),me=a(6),pe=a.n(me),_e=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).onClick=function(){var e=n.state.is_media_expanded;n.setState({is_media_expanded:!e})},n.state={is_media_expanded:!1,is_media_max:!1,is_comments_expanded:!1},n}return Object(h.a)(a,[{key:"renderMedia",value:function(e){if(!this.state.is_media_expanded)return null;switch(e.type){case"video":return r.a.createElement(ie,{post:e});case"image":return r.a.createElement(X,{post:e});case"text":return r.a.createElement(te,{post:e});case"link":return r.a.createElement(re,{post:e});default:return null}}},{key:"renderComments",value:function(e){var t=this,a=this.state,n=a.is_media_expanded,s=a.is_comments_expanded;return n?s?e&&e.length?r.a.createElement(de,{comments:e}):null:r.a.createElement("div",{className:pe.a.load_comments,onClick:function(){t.setState({is_comments_expanded:!s}),t.props.fetchPost(t.props.post)}},"LOAD COMMENTS"):null}},{key:"renderIcon",value:function(){var e="fa-question-circle";switch(this.props.post.type){case"text":e="fas fa-align-left";break;case"image":e="far fa-image";break;case"video":e="fas fa-video";break;case"link":e="fas fa-external-link-alt"}return r.a.createElement("i",{onClick:this.onClick,className:w()(pe.a.icon,e)})}},{key:"render",value:function(){var e=this.props.post;if(e){var t=this.state,a=t.is_media_expanded,n=t.is_comments_expanded,s=this.props,c=s.comments,i=s.fetchPosts,o=e.subreddit;return r.a.createElement("div",{className:pe.a.post},r.a.createElement("div",{className:pe.a.bar},r.a.createElement("div",{className:pe.a.score},e.score_display),r.a.createElement("div",{className:pe.a.thumbnail,style:{backgroundImage:'url("'.concat(e.thumbnail||e.media.image,'")')}}),r.a.createElement("div",{className:pe.a.body},r.a.createElement("div",{className:pe.a.title},e.title),this.renderIcon(),r.a.createElement("div",{className:pe.a.submission},"Submitted ".concat(e.submitted_at," ago by ").concat(e.author," to "),r.a.createElement("span",{className:pe.a.subreddit_link,onClick:function(){i(o)}},e.subreddit)),r.a.createElement("div",{className:pe.a.comments},e.num_comments," comments"))),r.a.createElement("div",{className:w()(pe.a.content_wrapper,Object(W.a)({},pe.a.hide,!a))},this.renderMedia(e)),r.a.createElement("div",{className:w()(pe.a.comments_wrapper,Object(W.a)({},pe.a.hide,!n))},this.renderComments(c.byID[e.id])))}}}]),a}(n.Component),be={fetchPost:function(e){return function(t){g("https://www.reddit.com/r/".concat(e.subreddit,"/comments/").concat(e.id,".json"),(function(e){var t=Object(Y.a)(e,2),a=t[0],n=t[1],r={data:j(a),comments:[]};return(n=n.data.children).forEach((function(e){!function e(t,a,n){if(t.body){var r={id:t.id,key:"".concat(t.id,"_").concat(y()),author:t.author,body:k(t.body),score:t.score,awards:(t.all_awardings||[]).map((function(e){return{name:e.name.toLowerCase(),count:e.count,key:"".concat(e.id,"-").concat(y())}})),even:n};a.push(r),t.replies&&t.replies.data.children&&(r.replies=[],t.replies.data.children.forEach((function(t){e(t.data,r.replies,!n)})))}}(e.data,r.comments,!0)})),r})).then((function(e){t({type:"post",payload:e})}))}},fetchPosts:E},he=Object(i.b)((function(e){return{comments:e.comments}}),be)(_e),fe=a(28),ve=a.n(fe),ye=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.posts;return console.log(a),r.a.createElement("div",{className:w()(ve.a.wrapper,t)},((a||{}).list||[]).map((function(e){return e&&e.id?r.a.createElement(he,{key:e.id,post:e}):null})))}}]),a}(n.Component),ke=Object(i.b)((function(e){return{posts:e.posts}}),null)(ye),ge=a(14),xe=a.n(ge),je=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchPosts({title:"best",url:"best"})}},{key:"render",value:function(){return r.a.createElement("div",{className:xe.a.wrapper},r.a.createElement(M,{className:xe.a.header}),r.a.createElement(ke,{className:xe.a.articleList}),r.a.createElement(U,{className:xe.a.sideMenu}))}}]),a}(n.Component),Ee={fetchPosts:E},Oe=Object(i.b)(null,Ee)(je);c.a.render(r.a.createElement(i.a,{store:Object(o.d)(_,Object(o.a)(l.a))},r.a.createElement(Oe,null)),document.getElementById("root"))}],[[30,1,2]]]);
//# sourceMappingURL=main.7d9cb85a.chunk.js.map